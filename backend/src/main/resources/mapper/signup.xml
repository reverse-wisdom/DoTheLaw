<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="com.ssafy.pjt.core.repository.mapper.MemberMapper">

	<insert id="joinMember" parameterType="SignupRequestDTO">		
		INSERT INTO member (email, password, phone, name, role) 
		VALUES (#{email}, #{password}, #{phone}, #{name}, #{role.code});		
	</insert>
	
	<insert id="joinLawyer" parameterType="MemberRequestDTO">
		BEGIN;
		INSERT INTO member (email, password, name, phone, role)
		   VALUES(#{email}, #{password}, #{name}, #{phone}, #{role});
		INSERT INTO lawyer (uuid, career, introduction, address, photo, dept, chck)
		   VALUES(LAST_INSERT_ID(), #{career}, #{introduction}, #{address}, #{photo}, #{dept}, #{chck});
		COMMIT;
	</insert>
	
	
</mapper>